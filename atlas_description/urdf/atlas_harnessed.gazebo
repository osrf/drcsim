<!-- This  file is for demostration of Gazebo's Harness plugin.
     Do not use this file if you intend to do meaningful work
     with atlas -->

<robot name="drc_skeleton">
  <gazebo>
    <plugin filename="libgazebo_ros_harness.so" name="harness">
    <!--<plugin filename="libHarnessPlugin.so" name="harness"> -->
      <!-- This plugin creates a special link, with the name specified in
           <harness_link_name>, that is fixed to the world. Use this name
           when creating a joint in this world. See below for an example.
      -->
      <harness_link_name>harness_link</harness_link_name>

      <!-- Pose of the harness link, in this model's frame -->
      <harness_link_pose>0 0 2 0 0 0</harness_link_pose>

      <joint name="joint1" type="prismatic">
        <pose>0 0 0 0 0 0</pose>
        <!-- This name matches <harness_link_name> above. -->
        <parent>harness_link</parent>
        <child>torso</child>
        <axis>
          <xyz>0 0 1</xyz>
          <dynamics>
            <damping>10</damping>
          </dynamics>
          <limit>
            <lower>-1.5</lower>
            <upper>0</upper>
            <effort>10000</effort>
            <velocity>-1</velocity>
            <stiffness>0</stiffness>
            <dissipation>0</dissipation>
          </limit>
        </axis>
        <physics>
          <ode>
            <implicit_spring_damper>1</implicit_spring_damper>
            <limit>
              <cfm>0.0</cfm>
              <erp>0.0</erp>
            </limit>
          </ode>
        </physics>
      </joint>

      <!-- The joint that raises or lowers the harness -->
      <winch>
        <!-- This must be a joint specified within
             the body of this plugin. -->
        <joint>joint1</joint>

        <!-- PID value for velocity control of the winch. These values
             are tuned to work with this box model. -->
        <pid>
          <p>10000</p>
          <i>0</i>
          <d>0</d>
        </pid>
      </winch>

      <!-- Joint to detach. Once the joint is detached, it cannot be
           reattached. This must be a joint specified within the
           body of this plugin. -->
      <detach>joint1</detach>
    </plugin>
  </gazebo>
</robot>
